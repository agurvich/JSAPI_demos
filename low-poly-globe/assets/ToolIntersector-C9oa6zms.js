import{lF as x,lG as M,lH as d,lI as p,lJ as j,lK as y,gj as Z,gk as S,a5 as N,lL as D,j3 as f,aR as L,lM as C,O as w}from"./index-O3Mu8AMX.js";function $(t,e){return R(t,()=>e)}function R(t,e){const n=N(),o=N();let a=!1;return c=>{const l=e(c);if(c.action==="start"){const s=M(c.screenStart,d(p.get())),r=j(t.state.camera,s,b);r!=null&&(a=y(l,r,n))}if(!a)return null;const i=M(c.screenEnd,d(p.get())),u=j(t.state.camera,i,b);return u==null?null:y(l,u,o)?{...c,renderStart:n,renderEnd:o,plane:l,ray:u}:null}}var g;function O(t){let e=null;return n=>{switch(n.action){case"start":e=t.disableDisplay();break;case"end":case"cancel":e!=null&&(e.remove(),e=null)}return n}}function U(t,e=null){const n=Z(t.state.viewingMode);n.options.selectionMode=!0,n.options.store=S.MIN,n.options.hud=!1;const o=C(),a={requiresGroundFeedback:!0,enableDraped:!0,exclude:new Set},c=N(),l=e??t.spatialReference,i=s=>{t.map.ground&&t.map.ground.opacity<1?a.exclude.add(D):a.exclude.delete(D),t.sceneIntersectionHelper.intersectIntersectorScreen(M(s,o),n,a);const r=n.results.min;let I;if(r.getIntersectionPoint(c))I=r.intersector===f.TERRAIN?g.GROUND:g.OTHER;else{if(!n.results.ground.getIntersectionPoint(c))return null;I=g.GROUND}return{location:t.renderCoordsHelper.fromRenderCoords(c,new L({spatialReference:l})),surfaceType:I}};let u;return s=>{if(s.action==="start"){const I=i(s.screenStart);u=I!=null?I.location:null}if(u==null)return null;const r=i(s.screenEnd);return(r==null?void 0:r.location)!=null?{...s,mapStart:u,mapEnd:r.location,surfaceType:r.surfaceType}:null}}(function(t){t[t.GROUND=0]="GROUND",t[t.OTHER=1]="OTHER"})(g||(g={}));const b=x(),z="theme-style";function A(t,e){return G(Y(H(T(t),e)),e.size)}function H(t,{accentColor:e,contrastColor:n}){const o=e.toHex(),a=e.a,c=n.toHex(),l=n.a,i=t.getElementsByTagNameNS("http://www.w3.org/2000/svg","style").namedItem(z);return i&&(i.innerHTML=`
      .contrast-fill { fill: ${c}; fill-opacity: ${l}; }
      .contrast-stroke { stroke: ${c}; stroke-opacity: ${l};  }
      .accent-fill { fill: ${o}; fill-opacity: ${a}; }
      .accent-stroke { stroke: ${o}; stroke-opacity:  ${a}; }`),t}function T(t){const e=t.split(",")[1],n=atob(e);return new DOMParser().parseFromString(n,"image/svg+xml")}function Y(t){const e=new XMLSerializer().serializeToString(t);return`data:image/svg+xml;base64,${btoa(e)}`}function G(t,e){const n=new Image(e,e);return n.src=t,n}const h="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI1NiIgaGVpZ2h0PSI1NiIgZmlsbD0ibm9uZSIgdmVyc2lvbj0iMi4wIj48c3R5bGUgaWQ9InRoZW1lLXN0eWxlIj4uY29udHJhc3QtZmlsbHtmaWxsOiNmZmZ9LmNvbnRyYXN0LXN0cm9rZXtzdHJva2U6I2ZmZn0uYWNjZW50LWZpbGx7ZmlsbDojZmY3ZjAwO2ZpbGwtb3BhY2l0eTouNX08L3N0eWxlPjxwYXRoIGQ9Ik0yOCAwYTI4IDI4IDAgMSAxIDAgNTYgMjggMjggMCAwIDEgMC01NiIgY2xhc3M9ImFjY2VudC1maWxsIi8+PHBhdGggc3Ryb2tlLXdpZHRoPSI0Ljk5IiBkPSJNMjAuMDUgNDAuODZhMTUuMDUgMTUuMDUgMCAwIDAgMTcuMTQtMS41IDE1LjA1IDE1LjA1IDAgMCAwIDQuNDctMTYuNjUgMTUuMDUgMTUuMDUgMCAwIDAtMjIuNzItNy4xNSAxNS4wNSAxNS4wNSAwIDAgMC01LjUgNy4xNSIgY2xhc3M9ImNvbnRyYXN0LXN0cm9rZSIvPjxwYXRoIGQ9Im0xMC45NyAzNS41NyA1LjM4IDEyLjA3IDcuNzktMTMuNDd6IiBjbGFzcz0iY29udHJhc3QtZmlsbCIvPjwvc3ZnPg==",v="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI1NiIgaGVpZ2h0PSI1NiIgZmlsbD0ibm9uZSIgdmVyc2lvbj0iMi4wIj48c3R5bGUgaWQ9InRoZW1lLXN0eWxlIj4uY29udHJhc3QtZmlsbHtmaWxsOiNmZmZ9LmNvbnRyYXN0LXN0cm9rZXtzdHJva2U6I2ZmZn0uYWNjZW50LWZpbGx7ZmlsbDojZmY3ZjAwO2ZpbGwtb3BhY2l0eTouNX08L3N0eWxlPjxjaXJjbGUgY3g9IjM5LjQ3OCIgY3k9IjMuMDc4IiByPSIyOCIgY2xhc3M9ImFjY2VudC1maWxsIiB0cmFuc2Zvcm09InJvdGF0ZSg0MC41NDIpIi8+PHBhdGggc3Ryb2tlLXdpZHRoPSI1IiBkPSJtNy4wNzQgMzAuMDUzIDI5LjM5NyAxMS45ODUtMy42NzMtMzMuNDkzIiBjbGFzcz0iY29udHJhc3Qtc3Ryb2tlIi8+PHBhdGggc3Ryb2tlLXdpZHRoPSIyLjk5NiIgZD0iTTI0LjUwNCAyMy4yMDdhMTEuOTggMTEuOTggMCAwIDAtOS44IDcuNTA3IiBjbGFzcz0iY29udHJhc3Qtc3Ryb2tlIGNvbnRyYXN0LWZpbGwiLz48cGF0aCBkPSJtMjkuODE4IDIyLjgwOC02LjE4NCA0LjYtLjU0MS04LjM2NHoiIGNsYXNzPSJjb250cmFzdC1maWxsIi8+PC9zdmc+",m=64;function W(t,e){const{accentColor:n,contrastColor:o,preMultiplyAlpha:a}=e;return t.fromData(`heading-rotate:[accent:${n},contrast:${o},size:${m}]`,()=>new w(A(h,{accentColor:n,contrastColor:o,size:m}),{mipmap:!0,reloadable:!0,preMultiplyAlpha:a}))}function X(t,e){const{accentColor:n,contrastColor:o,preMultiplyAlpha:a}=e;return t.fromData(`tilt-rotate:[accent:${n},contrast:${o},size:${m}]`,()=>new w(A(v,{accentColor:n,contrastColor:o,size:m}),{mipmap:!0,reloadable:!0,preMultiplyAlpha:a}))}function k(t){const e=Z(t);return e.options.store=S.MIN,e.options.hud=!1,e}export{$ as O,W as l,X as n,O as q,k as t,U as z};

import{cR as v,e,y as t,ds as m,c as h,bg as f,lm as x,ln as T,bk as j,lo as E,ba as p,bA as O,aE as F,e6 as D,lp as R,ks as U,aU as M,kp as $,d0 as k,V as I,ht as A,hu as B,$ as b,d1 as C,lq as Q,kk as V,kl as G,km as N,lr as Z,a4 as P,ls as z,lt as J}from"./index-BqO8XNEn.js";let u=class extends v(f){constructor(i){super(i),this.creatorField=null,this.creationDateField=null,this.editorField=null,this.editDateField=null,this.realm=null,this.timeZone=null}};e([t()],u.prototype,"creatorField",void 0),e([t()],u.prototype,"creationDateField",void 0),e([t()],u.prototype,"editorField",void 0),e([t()],u.prototype,"editDateField",void 0),e([t()],u.prototype,"realm",void 0),e([t(m("dateFieldsTimeReference",!0))],u.prototype,"timeZone",void 0),u=e([h("esri.layers.support.EditFieldsInfo")],u);const L=u;let d=class extends v(f){constructor(i){super(i)}};e([t({constructOnly:!0,json:{write:!0}})],d.prototype,"name",void 0),e([t({constructOnly:!0,json:{write:!0}})],d.prototype,"fields",void 0),e([t({constructOnly:!0,json:{write:!0}})],d.prototype,"isAscending",void 0),e([t({constructOnly:!0,json:{write:!0}})],d.prototype,"indexType",void 0),e([t({constructOnly:!0,json:{write:!0}})],d.prototype,"isUnique",void 0),e([t({constructOnly:!0,json:{write:!0}})],d.prototype,"description",void 0),d=e([h("esri.layers.support.FeatureIndex")],d);let c=class extends v(f){constructor(i){super(i),this.shapeAreaField=null,this.shapeLengthField=null,this.units=null}};e([t({type:String,json:{read:{source:"shapeAreaFieldName"}}})],c.prototype,"shapeAreaField",void 0),e([t({type:String,json:{read:{source:"shapeLengthFieldName"}}})],c.prototype,"shapeLengthField",void 0),e([t({type:String,json:{read:n=>x.read(n)||T.read(n)}})],c.prototype,"units",void 0),c=e([h("esri.layers.support.GeometryFieldsInfo")],c);const H=c,S=new j({esriRelCardinalityOneToOne:"one-to-one",esriRelCardinalityOneToMany:"one-to-many",esriRelCardinalityManyToMany:"many-to-many"}),w=new j({esriRelRoleOrigin:"origin",esriRelRoleDestination:"destination"});let a=class extends v(f){constructor(n){super(n),this.cardinality=null,this.composite=null,this.id=null,this.keyField=null,this.keyFieldInRelationshipTable=null,this.name=null,this.relatedTableId=null,this.relationshipTableId=null,this.role=null}};e([t({json:{read:S.read,write:S.write}})],a.prototype,"cardinality",void 0),e([t({json:{read:!0,write:!0}})],a.prototype,"composite",void 0),e([t({json:{read:!0,write:!0}})],a.prototype,"id",void 0),e([t({json:{read:!0,write:!0}})],a.prototype,"keyField",void 0),e([t({json:{read:!0,write:!0}})],a.prototype,"keyFieldInRelationshipTable",void 0),e([t({json:{read:!0,write:!0}})],a.prototype,"name",void 0),e([t({json:{read:!0,write:!0}})],a.prototype,"relatedTableId",void 0),e([t({json:{read:!0,write:!0}})],a.prototype,"relationshipTableId",void 0),e([t({json:{read:w.read,write:w.write}})],a.prototype,"role",void 0),a=e([h("esri.layers.support.Relationship")],a);const q=a;let y=class extends v(f){constructor(n){super(n),this.code=null,this.defaultValues={},this.domains=null,this.name=null}readDomains(n){if(!n)return null;const i={};for(const o of Object.keys(n))i[o]=E(n[o]);return i}writeDomains(n,i){var r;if(!n)return;const o={};for(const s of Object.keys(n))n[s]&&(o[s]=(r=n[s])==null?void 0:r.toJSON());i.domains=o}};e([t({type:Number,json:{write:!0}})],y.prototype,"code",void 0),e([t({type:Object,json:{write:!0}})],y.prototype,"defaultValues",void 0),e([t({json:{write:!0}})],y.prototype,"domains",void 0),e([p("domains")],y.prototype,"readDomains",null),e([O("domains")],y.prototype,"writeDomains",null),e([t({type:String,json:{write:!0}})],y.prototype,"name",void 0),y=e([h("esri.layers.support.Subtype")],y);const W=y,ee=n=>{let i=class extends n{constructor(){super(...arguments),this.copyright=null,this.capabilities=null,this.dateFieldsTimeZone=null,this.datesInUnknownTimezone=!1,this.definitionExpression=null,this.displayField=null,this.editFieldsInfo=null,this.editingInfo=null,this.elevationInfo=null,this.floorInfo=null,this.fullExtent=null,this.gdbVersion=null,this.geometryFieldsInfo=null,this.geometryType=null,this.globalIdField=null,this.hasM=void 0,this.hasZ=void 0,this.heightModelInfo=null,this.historicMoment=null,this.indexes=new(I.ofType(d)),this.isTable=!1,this.layerId=void 0,this.maxScale=0,this.minScale=0,this.objectIdField=null,this.preferredTimeZone=null,this.relationships=null,this.returnM=void 0,this.returnZ=void 0,this.serviceDefinitionExpression=null,this.serviceItemId=null,this.sourceJSON=null,this.spatialReference=b.WGS84,this.subtypeField=null,this.subtypes=null,this.trackIdField=null,this.version=void 0}get authenticationTriggerEvent(){if(!this.url)return null;const{capabilities:o}=this;if(o){const{query:r,operations:s,editing:l}=o;if(!r.supportsQueryByOthers||!r.supportsQueryByAnonymous||s.supportsEditing&&!(l.supportsUpdateByOthers&&l.supportsUpdateByAnonymous&&l.supportsDeleteByOthers&&l.supportsDeleteByAnonymous))return"load"}return this.userHasUpdateItemPrivileges?Q(this)?"load":this.hasUpdateItemRestrictions?o.operations.supportsQuery?"editing":"load":null:this.userHasFullEditingPrivileges&&this.hasFullEditingRestrictions?"editing":null}readCapabilitiesFromService(o,r){return V(r,this.url)}readEditingInfo(o,r){const{editingInfo:s}=r;return s?{lastEditDate:s.lastEditDate!=null?new Date(s.lastEditDate):null}:null}get effectiveCapabilities(){var g;const o=this.capabilities;if(!o)return null;const r=F(o),{operations:s,editing:l}=r;return(g=this.sourceJSON)!=null&&g.isMultiServicesView?(this.userHasUpdateItemPrivileges&&(s.supportsQuery=!0),r):this.userHasUpdateItemPrivileges?(s.supportsAdd=s.supportsDelete=s.supportsEditing=s.supportsQuery=s.supportsUpdate=l.supportsDeleteByOthers=l.supportsGeometryUpdate=l.supportsUpdateByOthers=!0,r):(this.userHasFullEditingPrivileges&&s.supportsEditing&&(s.supportsAdd=s.supportsDelete=s.supportsUpdate=l.supportsGeometryUpdate=!0),r)}readGlobalIdFieldFromService(o,r){return G(r)}get hasFullEditingRestrictions(){var l;const o=this.capabilities;if(!o||(l=this.sourceJSON)!=null&&l.isMultiServicesView)return!1;const{operations:r,editing:s}=o;return r.supportsEditing&&!(r.supportsAdd&&r.supportsDelete&&r.supportsUpdate&&s.supportsGeometryUpdate)}get hasUpdateItemRestrictions(){var l;const o=this.capabilities;if(!o)return!1;const{operations:r,editing:s}=o;return(l=this.sourceJSON)!=null&&l.isMultiServicesView?!r.supportsQuery:!(r.supportsAdd&&r.supportsDelete&&r.supportsEditing&&r.supportsQuery&&r.supportsUpdate&&s.supportsDeleteByOthers&&s.supportsGeometryUpdate&&s.supportsUpdateByOthers)}readIsTableFromService(o,r){return r.type==="Table"}readMaxScale(o,r){return r.effectiveMaxScale||o||0}readMinScale(o,r){return r.effectiveMinScale||o||0}readObjectIdFieldFromService(o,r){return N(r)}readServiceDefinitionExpression(o,r){return r.definitionQuery||r.definitionExpression}set url(o){const r=Z({layer:this,url:o,nonStandardUrlAllowed:!0,logger:P.getLogger(this)});this._set("url",r.url),r.layerId!=null&&this._set("layerId",r.layerId)}writeUrl(o,r,s,l){z(this,o,null,r,l)}readVersion(o,r){return J(r)}};return e([t({readOnly:!0})],i.prototype,"authenticationTriggerEvent",null),e([t({type:String,json:{origins:{service:{read:{source:"copyrightText"}}}}})],i.prototype,"copyright",void 0),e([t({readOnly:!0,json:{read:!1,origins:{service:{read:{source:["advancedQueryCapabilities","allowGeometryUpdates","allowUpdateWithoutMValues","archivingInfo","capabilities","datesInUnknownTimezone","hasAttachments","hasM","hasZ","maxRecordCount","maxRecordCountFactor","ownershipBasedAccessControlForFeatures","standardMaxRecordCount","supportedQueryFormats","supportsAdvancedQueries","supportsApplyEditsWithGlobalIds","supportsAttachmentsByUploadId","supportsAttachmentsResizing","supportsCalculate","supportsCoordinatesQuantization","supportsExceedsLimitStatistics","supportsFieldDescriptionProperty","supportsQuantizationEditMode","supportsRollbackOnFailureParameter","supportsStatistics","supportsTruncate","supportsValidateSql","tileMaxRecordCount","useStandardizedQueries"]}}}}})],i.prototype,"capabilities",void 0),e([p("service","capabilities")],i.prototype,"readCapabilitiesFromService",null),e([t(m("dateFieldsTimeReference"))],i.prototype,"dateFieldsTimeZone",void 0),e([t({type:Boolean})],i.prototype,"datesInUnknownTimezone",void 0),e([t({type:String,json:{origins:{service:{read:!1,write:!1}},name:"layerDefinition.definitionExpression",write:{enabled:!0,allowNull:!0}}})],i.prototype,"definitionExpression",void 0),e([t({type:String,json:{origins:{service:{read:{source:"displayField"}}}}})],i.prototype,"displayField",void 0),e([t({readOnly:!0,type:L})],i.prototype,"editFieldsInfo",void 0),e([t({readOnly:!0})],i.prototype,"editingInfo",void 0),e([p("editingInfo")],i.prototype,"readEditingInfo",null),e([t({readOnly:!0})],i.prototype,"effectiveCapabilities",null),e([t((()=>{const o=F(D),r=o.json.origins;return r["web-map"]={read:!1,write:!1},r["portal-item"]={read:!1,write:!1},o})())],i.prototype,"elevationInfo",void 0),e([t({type:R,json:{name:"layerDefinition.floorInfo",write:!0,origins:{"web-scene":{name:"layerDefinition.floorInfo",write:{enabled:!0,layerContainerTypes:U}}}}})],i.prototype,"floorInfo",void 0),e([t({type:M,json:{origins:{service:{read:{source:"extent"}}}}})],i.prototype,"fullExtent",void 0),e([t()],i.prototype,"gdbVersion",void 0),e([t({readOnly:!0,type:H,json:{read:{source:"geometryProperties"}}})],i.prototype,"geometryFieldsInfo",void 0),e([t({type:["point","polygon","polyline","multipoint","multipatch","mesh"],json:{origins:{service:{read:$.read}}}})],i.prototype,"geometryType",void 0),e([t({type:String})],i.prototype,"globalIdField",void 0),e([p("service","globalIdField",["globalIdField","fields"])],i.prototype,"readGlobalIdFieldFromService",null),e([t({readOnly:!0})],i.prototype,"hasFullEditingRestrictions",null),e([t({type:Boolean,json:{origins:{service:{read:!0}}}})],i.prototype,"hasM",void 0),e([t({readOnly:!0})],i.prototype,"hasUpdateItemRestrictions",null),e([t({type:Boolean,json:{origins:{service:{read:!0}}}})],i.prototype,"hasZ",void 0),e([t({readOnly:!0,type:k})],i.prototype,"heightModelInfo",void 0),e([t({type:Date})],i.prototype,"historicMoment",void 0),e([t({type:I.ofType(d),readOnly:!0})],i.prototype,"indexes",void 0),e([t({readOnly:!0})],i.prototype,"isTable",void 0),e([p("service","isTable",["type"])],i.prototype,"readIsTableFromService",null),e([t({type:Number,json:{origins:{service:{read:{source:"id"}},"portal-item":{read:!1,write:{target:"id"}}},read:!1}})],i.prototype,"layerId",void 0),e([t(A)],i.prototype,"maxScale",void 0),e([p("service","maxScale",["maxScale","effectiveMaxScale"])],i.prototype,"readMaxScale",null),e([t(B)],i.prototype,"minScale",void 0),e([p("service","minScale",["minScale","effectiveMinScale"])],i.prototype,"readMinScale",null),e([t({type:String})],i.prototype,"objectIdField",void 0),e([p("service","objectIdField",["objectIdField","fields"])],i.prototype,"readObjectIdFieldFromService",null),e([t(m("preferredTimeReference"))],i.prototype,"preferredTimeZone",void 0),e([t({type:[q],readOnly:!0})],i.prototype,"relationships",void 0),e([t({type:Boolean})],i.prototype,"returnM",void 0),e([t({type:Boolean})],i.prototype,"returnZ",void 0),e([t({readOnly:!0,json:{write:!1}})],i.prototype,"serverGens",void 0),e([t({readOnly:!0})],i.prototype,"serviceDefinitionExpression",void 0),e([p("service","serviceDefinitionExpression",["definitionQuery","definitionExpression"])],i.prototype,"readServiceDefinitionExpression",null),e([t({type:String,readOnly:!0,json:{read:!1,origins:{service:{read:!0}}}})],i.prototype,"serviceItemId",void 0),e([t()],i.prototype,"sourceJSON",void 0),e([t({type:b,json:{origins:{service:{read:{source:"extent.spatialReference"}}}}})],i.prototype,"spatialReference",void 0),e([t({type:String,readOnly:!0,json:{origins:{service:{read:!0}}}})],i.prototype,"subtypeField",void 0),e([t({type:[W],readOnly:!0,json:{read:!1,origins:{service:{read:!0}}}})],i.prototype,"subtypes",void 0),e([t({type:String,json:{read:{source:"timeInfo.trackIdField"}}})],i.prototype,"trackIdField",void 0),e([t(C)],i.prototype,"url",null),e([O("url")],i.prototype,"writeUrl",null),e([t({json:{origins:{service:{read:!0}},read:!1}})],i.prototype,"version",void 0),e([p("service","version",["currentVersion","capabilities","drawingInfo","hasAttachments","htmlPopupType","relationships","timeInfo","typeIdField","types"])],i.prototype,"readVersion",null),i=e([h("esri.layers.mixins.FeatureLayerBase")],i),i};export{ee as D};
